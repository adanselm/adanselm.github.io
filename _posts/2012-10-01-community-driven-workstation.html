---
layout: post
title: Community-driven workstation configuration
date: '2012-10-01T23:53:00.000+02:00'
author: Adrien Anselme
tags:
- Github
- Organization
modified_time: '2012-12-21T03:24:36.729+01:00'
blogger_id: tag:blogger.com,1999:blog-5707482977882730214.post-3292304921201941199
blogger_orig_url: http://adanselm.blogspot.com/2012/10/community-driven-workstation.html
---

With the success of GitHub, developers now tend to think differently. It feels a bit like every developer wanting to share code has found a central reliable platform, and that they can focus on doing it rather than on how to do it. Not that such platforms didn't exist before (sourceforge, savannah, google code, ...), but the nature of Git and pull requests make it so easy, and the trend is just so strong with GitHub, that it seems to drive the change.<br /><br />What I really appreciate in this process, is how the tool is used in ways that are a bit different than what it has been made for. This is particularly true of the various tools and repositories that were made to help you configure your development environment, sharing scripts and configuration files rather than pure code. Developers are even <a href="http://dotfiles.github.com/" target="_blank">encouraged to share their configurations</a>, so that everyone can learn from them, and in exchange, you get patches from the community, and syncing your workstations becomes super easy.<br /><div class="separator" style="clear: both; text-align: center;"></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://raw.github.com/github/media/master/octocats/octocat_fluid.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="https://raw.github.com/github/media/master/octocats/octocat_fluid.png" width="320" /></a></div><br /><h3>Homebrew</h3>If you're used to Debian/Ubuntu's <span style="font-family: Courier New, Courier, monospace;">apt-get</span> commands, you might feel like an orphan in macosx. Installing code dependencies and useful tools can be done much more easily with <a href="http://mxcl.github.com/homebrew/" target="_blank">Homebrew</a>, which basically takes the principles of MacPorts (which was itself inspired by FreeBSD's Ports) to automatize the task of downloading a source package and its dependencies, and compile everything for you.<br /><br />Explanations on the official website are quite good and you should not need any help to install it. The interesting part is that every package is defined by a small Ruby script, which is itself versioned on Git. So updating the list of available packages and their versions is basically updating the Git repository. And adding a new(/modifying a) package is just submitting a pull request with your own scripts! Very elegant solution in my opinion.<br /><br /><h3>Dotfiles</h3><a href="https://github.com/mathiasbynens/dotfiles" target="_blank">Dotfiles</a> contains a bunch of usual <span style="font-family: Courier New, Courier, monospace;">rc</span> files for wget, brew, vim, git, etc. But I especially use it for its osx defaults file, which, once edited to my taste, allows me to restore a more power-user friendly environment under macosx.<br /><h3></h3><h3>Oh-my-zsh</h3>Once you get into shell tuning, you necessarily stumble upon Zsh and its highly configurable features. <a href="https://github.com/robbyrussell/oh-my-zsh" target="_blank">Oh-my-zsh</a>&nbsp;includes a bunch of useful plugins and themes, and lets you switch between them in no time. I'm not an expert in zsh configuration, so I really enjoyed Oh-my-zsh and its sophisticated default setup.<br /><h3></h3><h3>Vim distributions</h3><div>Vim distributions usually consist of a fine-tuned <span style="font-family: Courier New, Courier, monospace;">vimrc</span> file in association with a bunch of useful plugins, handled through a plugin-management system like Vundle.</div><div><br /></div><div>Vundle (or equivalent) is really what makes everything so easy now, because you no longer have to browse the Internet for a vintage page of the eighties explaining how to install a particular plugin. All the most influential ones can be installed right from inside vim. Just look for a particular module with <span style="font-family: Courier New, Courier, monospace;">:BundleSearch</span>, browse the results and type '<span style="font-family: Courier New, Courier, monospace;">i</span>' on the one you would like to install. Then add it to your <span style="font-family: Courier New, Courier, monospace;">vimrc</span> to make the change permanent or remove the unneeded modules with <span style="font-family: Courier New, Courier, monospace;">:BundleClean</span>. Easy.</div><div><br /></div><div>Depending on the author's languages of predilection, these setups revolve around a various number of plugins, to ease ruby development, markup languages, finding files, syntax checking, etc.&nbsp;Unfortunately, there doesn't seem to be a lot of C++ developers sharing their settings, and the existing distributions I found had to be completed with syntax highlighting and code navigation modules made for C(/C++).</div><div><br /></div><div>I found 3 particularly interesting ones to base my work on:</div><div><ul><li><a href="https://github.com/spf13/spf13-vim" target="_blank">Spf13-vim</a></li><li><a href="https://github.com/carlhuda/janus" target="_blank">Janus</a></li><li>And the one I decided to merge my old setup with: <a href="https://github.com/mutewinter/dot_vim" target="_blank">Dot_vim</a></li></ul></div><div><br /></div><div class="separator" style="clear: both; text-align: center;"><img border="0" height="352" src="/images/iTerm.png" width="400" /></div><div><br /></div><div>Once completed with a few shortcuts of my taste, I had to improve the lousy default highlighting settings.</div><div><br /></div><h4>Syntax Highlighting for C++</h4><div>Is best handled with <a href="http://www.cgtk.co.uk/vim-scripts/taghighlight" target="_blank">TagHighlight</a>, which can be easily installed with <span style="font-family: Courier New, Courier, monospace;">:BundleInstall TagHighlight</span> but requires a bit of setup afterwards.</div><div><br /></div><div>First, you need to install "exuberant ctags", an improved version of the gnu ctags bundled with macosx which is getting really old. So: <span style="font-family: Courier New, Courier, monospace;">brew install ctags</span> is the way to go with your newly installed homebrew :) It will install it in <span style="font-family: Courier New, Courier, monospace;">/usr/local/bin</span>, because it doesn't want to overwrite the default program, which might be replaced when upgrading the OS anyway.</div><div><br /></div><div>Then, you need to tell TagHighlight to use this ctags binary. To do so, just open your <span style="font-family: Courier New, Courier, monospace;">vimrc</span> by using the shortcut <span style="font-family: Courier New, Courier, monospace;">,v</span><span style="font-family: inherit;">&nbsp;and put the following lines:</span></div><div><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;"><br /></span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp;if ! exists('g:TagHighlightSettings')</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp;let g:TagHighlightSettings = {}</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp;endif</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp;let g:TagHighlightSettings['CtagsExecutable']='/usr/local/bin/ctags'</span></div><div><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;"><br /></span></div><div><span style="font-family: inherit;">I also want to avoid putting tags files everywhere in my filesystem. What I want is just a bunch of hidden files at the root of my project, so I'm going to tell TagHighlight what files to look for and it will go up in the directory tree until it finds them:</span></div><div><span style="font-family: inherit;"><br /></span></div><div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; let&nbsp;g:TagHighlightSettings['ProjectConfigFileSearchWildcards']='.taghl_config.txt'</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; let g:TagHighlightSettings['ProjectConfigFileName']='.taghl_config.txt'</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; let g:TagHighlightSettings['TagFileSearchWildcards']='.tags'</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; let g:TagHighlightSettings['TagFileName']='.tags'</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; let g:TagHighlightSettings['TypesFileSearchWildcards']='.types*'</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; let g:TagHighlightSettings['TypesFilePrefix']='.types'</span></div></div><div><br /></div><div>To create the initial tags file, either call the ctags binary on command line, or invoke <span style="font-family: Courier New, Courier, monospace;">:UpdateTypesFile</span> while editing any source file in your project. What I usually do is:</div><div><ol><li>Touch empty tags files at the root of my project</li><li>Add them to my source control system</li><li>Call <span style="font-family: Courier New, Courier, monospace;">:UpdateTypesFile</span> once while editing one of my files</li><li>Setup an autocmd calling the ctags binary on command line to incrementally update the tags file on buffer write (and not recompute everything) OR use <span style="font-family: Courier New, Courier, monospace;">autotag</span> plugin which does just the same</li></ol></div><h4>Code Navigation</h4><div>I'm using <a href="http://majutsushi.github.com/tagbar/" target="_blank">TagBar</a> and am planning to reuse <a href="http://cscope.sourceforge.net/" target="_blank">Cscope</a> when I get time to dig into its configuration.</div><div>TagBar also needs to know where to find a valid ctags binary, and the built in Ctags navigation facility needs to read the generated files so we are going to tell it the same thing as to TagHighlight: "go up in the directory structure until you find the pattern".</div><div><br /></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; let g:tagbar_ctags_bin='/usr/local/bin/ctags'</span></div><div><span style="font-family: Courier New, Courier, monospace;">&nbsp; set tags=./.tags;/,~/.vimtags</span></div><div><br /></div><div><u>So, to summarize:</u> Ctags is called by TagHighlight to generate tags files that will contain the data it needs to colorize the code properly. These files will also be used by the built-in ctags support of vim to allow navigating through tags and functions declarations/definitions (check the ctrl-] shortcut). TagBar also needs to use the binary.</div><div><br /></div><div>Once you have everything setup, push your repositories on GitHub, and you've got a fine-tuned workstation configuration that can be reused on any computer you'll be working on! You can start with <a href="https://github.com/adanselm/dot_vim" target="_blank">my own fork of dot_vim</a> if you want. I'm interested in any improvement you can come up with. If you have many workstations to configure, and you come up with an efficient script to automate all that, I'd be glad to have a look at it as well!</div>
